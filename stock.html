<!DOCTYPE html>
<html>
<body>

<link rel="stylesheet" href="stockSupportFiles\bootstrap-2.3.2.css" />
<link rel="stylesheet" href="stockSupportFiles\header.css" />
<link rel="stylesheet" href="styles.css" />
<div class="container web">
<h3 style="text-align:center; word-spacing:50px; font-family:AR JULIAN">
	<a  class="navBar"  href="index.html">HOME</a> 
	<a  class="navBar"  href="roma.html">ROMA</a> 
	<a  class="navBar"  href="munich.html">MÜNCHEN</a>
	<a  class="navBar"  href="paris.html">PARIS</a>
	<a  class="navBar"  href="london.html">LONDON</a>
	<a  class="navBar"  href="stock.html">STOCKS</a>
</h3>

	<div class="row">
		<div class="span12">
			<div class="hero-unit">
				<h2>Stock Quote</h2>
			</div>
		</div>
	</div>
<div class="row content">
		<div class="span12">
			<form class="well control-group form-inline">
				<input type="text" id="symbol" class="input-" placeholder="Enter symbol">
        		<button id="input" type="button" class="btn btn-primary" onclick="loadDoc(symbol)" data-loading-text="Loading quote data...">Get Quote</button>
				<div style="display: block;" class="hide" id="resultContainer">
					<table class="table table-bordered table-striped">
						<thead>
						<tr>
						<th>Company</th>
						<th>Last Price</th>
						<th>Change</th>
						<th>Change Percent</th>
						<th>Change Percent YTD</th>
						<th>Volume</th>
						<th>Market Cap</th>
						</tr>
						</thead>
					<tbody>
						<tr>
						<td id="cmp"></td>
						<td id="lprice">$0.00</td>
						<td id="chng">0.00</td>
						<td id="pCent">0.00%</td>
						<td id="ytd">0.00%</td>
						<td id="vol">0</td>
						<td id="mcap"></td>
						</tr>
					</tbody>
					</table>
				</div>			
			</form>
		</div>
	</div>
</div>

<script type = "text/javascript" >
    function loadDoc(t) {
	    var ticSym = t.value;
		if(ticSym != "")
		{
			var url ="http://dev.markitondemand.com/MODApis/Api/v2/Quote/jsonp?callback=getQuote&symbol=" + ticSym + "&_=1479002084527"
			var script = document.createElement("script");
			script.id = "jsonp";
			script.type = "text/javascript";
			script.src = url;
			document.body.appendChild(script);
		}
    }

    function getQuote(inData) {
	    var wrong = /No symbol matches found/;
		
		try{
		    if(inData.Status.match("SUCCESS"))
			{			
				document.getElementById("cmp").innerHTML = inData.Name;
				document.getElementById("lprice").innerHTML = inData.LastPrice;
				document.getElementById("chng").innerHTML = inData.Change.toFixed(2);
				document.getElementById("pCent").innerHTML = inData.ChangePercent.toFixed(2);
				document.getElementById("ytd").innerHTML = inData.ChangePercentYTD.toFixed(2);
				document.getElementById("vol").innerHTML = inData.Volume;
				document.getElementById("mcap").innerHTML = inData.MarketCap;
			}
			else if(inData.Status.match("Failure|APP_SPECIFIC_ERROR"))
			{
				window.alert("Sorry, API error, please try different Symbol");
			}
			else
				window.alert("Can't determine results, please check entry value.")
			
		}
		catch(err)
		{
			if(inData.Message.match(wrong))
			{
				window.alert("No Ticket Symbol found");
			}
			else
			{
	            window.alert("Can't determine results, please check entry value.")
			}
		}	
    }

</script>
</body>
</html>
